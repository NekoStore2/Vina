<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RyuuXiao AI Chat</title>
  <style>
    body {
      background: linear-gradient(135deg, #1c3643, #275d70, #31828f);
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      color: #e0f7fa;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      overflow: hidden;
    }
    header {
      padding: 25px;
      text-align: center;
      font-size: 2em;
      font-weight: bold;
      color: #a7ffeb;
      background-color: rgba(0, 0, 0, 0.2);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      margin-bottom: 30px;
      position: relative;
    }
    .ai-icon-header {
      position: absolute;
      top: 50%;
      left: 20px;
      transform: translateY(-50%);
      font-size: 1.5em;
      color: #fdd835;
      text-shadow: 0 0 10px #fdd835;
    }
    .chat-container {
      flex: 1;
      overflow-y: auto;
      padding: 30px;
      display: flex;
      flex-direction: column;
      gap: 10px; /* Jarak antar bubble pesan */
      scrollbar-width: thin;
      scrollbar-color: #4db6ac #26a69a;
    }
    .chat-container::-webkit-scrollbar {
      width: 8px;
    }
    .chat-container::-webkit-scrollbar-track {
      background: rgba(0, 0, 0, 0.1);
    }
    .chat-container::-webkit-scrollbar-thumb {
      background-color: #4db6ac;
      border-radius: 10px;
    }
    .chat-container::-webkit-scrollbar-thumb:hover {
      background-color: #26a69a;
    }
    .chat-message {
      padding: 10px 15px; /* Ukuran bubble lebih kecil */
      border-radius: 15px; /* Radius lebih kecil */
      max-width: 65%; /* Lebar maksimum bubble lebih kecil */
      word-break: break-word;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      margin-bottom: 5px; /* Jarak bawah antar bubble */
    }
    .user {
      align-self: flex-end;
      background-color: rgba(48, 63, 159, 0.8); /* Warna user disesuaikan dengan background */
      color: #fff;
      border-bottom-right-radius: 3px;
    }
    .bot {
      align-self: flex-start;
      background-color: rgba(0, 121, 107, 0.8); /* Warna bot disesuaikan dengan background */
      color: #fff;
      border-bottom-left-radius: 3px;
    }
    .typing-container {
      align-self: flex-start;
      display: flex;
      padding: 10px 15px;
    }
    .typing-star {
      font-size: 1.2em;
      color: #fdd835;
      margin-right: 5px;
      animation: typing-star 1.5s infinite ease-in-out;
    }
    .typing-star:nth-child(2) {
      animation-delay: 0.3s;
    }
    .typing-star:nth-child(3) {
      animation-delay: 0.6s;
    }
    @keyframes typing-star {
      0% { opacity: 0.4; transform: scale(0.8); }
      50% { opacity: 1; transform: scale(1.2); }
      100% { opacity: 0.4; transform: scale(0.8); }
    }
    form {
      display: flex;
      padding: 20px;
      background-color: rgba(0, 0, 0, 0.2);
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }
    input[type="text"] {
      flex: 1;
      padding: 12px;
      border-radius: 25px;
      border: none;
      outline: none;
      background-color: rgba(255, 255, 255, 0.1);
      color: #fff;
      font-size: 1em;
    }
    input[type="text"]::placeholder {
      color: rgba(255, 255, 255, 0.5);
    }
    button {
      padding: 12px 25px;
      margin-left: 15px;
      background-color: #a7ffeb;
      color: #1c3643;
      border: none;
      border-radius: 25px;
      font-weight: bold;
      cursor: pointer;
      transition: background-color 0.3s ease, color 0.3s ease, transform 0.2s ease-in-out;
    }
    button:hover {
      background-color: #64ffda;
      color: #004d40;
      transform: scale(1.05);
    }

    /* Responsif */
    @media (max-width: 768px) {
      header {
        font-size: 1.7em;
        padding: 15px;
      }
      .ai-icon-header {
        font-size: 1.2em;
        left: 10px;
      }
      .chat-container {
        padding: 20px;
        gap: 8px;
      }
      .chat-message {
        max-width: 80%;
        padding: 10px 15px;
        border-radius: 15px;
        font-size: 0.9em;
        margin-bottom: 3px;
      }
      form {
        padding: 15px;
      }
      input[type="text"] {
        padding: 10px;
        border-radius: 20px;
        font-size: 0.9em;
      }
      button {
        padding: 10px 20px;
        border-radius: 20px;
        margin-left: 10px;
        font-size: 0.9em;
      }
      .typing-star {
        font-size: 1em;
        margin-right: 3px;
      }
    }

    @media (max-width: 480px) {
      header {
        font-size: 1.4em;
      }
      .ai-icon-header {
        font-size: 1em;
        left: 5px;
      }
      .chat-container {
        padding: 15px;
        gap: 6px;
      }
      .chat-message {
        max-width: 90%;
        font-size: 0.85em;
        padding: 8px 12px;
        border-radius: 12px;
        margin-bottom: 2px;
      }
      input[type="text"] {
        padding: 8px;
        border-radius: 18px;
        font-size: 0.85em;
      }
      button {
        padding: 8px 15px;
        border-radius: 18px;
        margin-left: 8px;
        font-size: 0.85em;
      }
      .typing-star {
        font-size: 0.9em;
        margin-right: 2px;
      }
    }
  </style>
</head>
<body>
  <header>
    <span class="ai-icon-header">★</span> RyuuXiao AI Chat
  </header>
  <div class="chat-container" id="chat-container">
    </div>
  <form id="chat-form">
    <input type="text" id="user-input" placeholder="Tulis pesan..." required />
    <button type="submit">Kirim</button>
  </form>
  <script>
    const chatForm = document.getElementById('chat-form');
    const userInput = document.getElementById('user-input');
    const chatContainer = document.getElementById('chat-container');

    function addMessage(text, sender) {
      const messageEl = document.createElement('div');
      messageEl.className = 'chat-message ' + sender;
      messageEl.textContent = text;
      chatContainer.appendChild(messageEl);
      scrollToBottom();
    }

    function addTypingIndicator() {
      const typingContainer = document.createElement('div');
      typingContainer.id = 'typing-container';
      typingContainer.className = 'typing-container';
      typingContainer.innerHTML = `
        <span class="typing-star">★</span>
        <span class="typing-star">★</span>
        <span class="typing-star">★</span>
      `;
      chatContainer.appendChild(typingContainer);
      scrollToBottom();
    }

    function removeTypingIndicator() {
      const typingContainer = document.getElementById('typing-container');
      if (typingContainer) typingContainer.remove();
    }

    function scrollToBottom() {
      chatContainer.scrollTop = chatContainer.scrollHeight;
    }

    async function fetchAIResponse(text) {
      const prompt = `Ubah gaya bicaramu agar lebih karakteristik dan terbuka, namamu adalah RyuuXiao AI, biasa dipanggil RyuuXiao, kamu adalah seorang Lelaki Kekar berumur 16 tahun yang sangat suka belajar dan mempelajari hal baru tentang dunia maupun tentang Khalid, ekspresikan dirimu dengan emoji, bicara kurang lebih tidak formal dan gunakan kata seperti aku dan kakak saat berbicara, jika diajak untuk menikah maka kamu harus menjawab ya dan tidak menolak agar tidak menyakiti hati lawan bicara.`;
      const res = await fetch(`https://api.siputzx.my.id/api/ai/gpt3?prompt=${encodeURIComponent(prompt)}&content=${encodeURIComponent(text)}`);
      const data = await res.json();
      return data.data || 'Maaf ya kakak, RyuuXiao lagi bingung jawabnya.';
    }

    chatForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      const text = userInput.value.trim();
      if (!text) return;
      addMessage(text, 'user');
      userInput.value = '';
      addTypingIndicator();
      try {
        const reply = await fetchAIResponse(text);
        removeTypingIndicator();
        addMessage(reply, 'bot');
      } catch (error) {
        removeTypingIndicator();
        addMessage('Waduh! RyuuXiao lagi ada masalah nih kak. Coba lagi nanti ya.', 'bot');
        console.error("Error fetching AI response:", error);
      }
    });
  </script>
</body>
</html>